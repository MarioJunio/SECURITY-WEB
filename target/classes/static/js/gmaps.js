'use strict';(function(a,b){'object'==typeof exports?module.exports=b():'function'==typeof define&&define.amd?define(['jquery','googlemaps!'],b):a.GMaps=b()})(this,function(){var a=function(w,x){if(w===x)return w;for(var y in x)void 0!==x[y]&&(w[y]=x[y]);return w},c=function(w,x){var B,y=Array.prototype.slice.call(arguments,2),z=[],A=w.length;if(Array.prototype.map&&w.map===Array.prototype.map)z=Array.prototype.map.call(w,function(C){var D=y.slice(0);return D.splice(0,0,C),x.apply(this,D)});else for(B=0;B<A;B++)callback_params=y,callback_params.splice(0,0,w[B]),z.push(x.apply(this,callback_params));return z},d=function(w){var y,x=[];for(y=0;y<w.length;y++)x=x.concat(w[y]);return x},g=function(w,x){var y=w[0],z=w[1];return x&&(y=w[1],z=w[0]),new google.maps.LatLng(y,z)},h=function(w,x){var y;for(y=0;y<w.length;y++)w[y]instanceof google.maps.LatLng||(w[y]=0<w[y].length&&'object'==typeof w[y][0]?h(w[y],x):g(w[y],x));return w},l=function(w,x){var y,z=w.replace('.','');return y='jQuery'in this&&x?$('.'+z,x)[0]:document.getElementsByClassName(z)[0],y},o=function(w,x){var y,w=w.replace('#','');return y='jQuery'in window&&x?$('#'+w,x)[0]:document.getElementById(w),y},q=function(w){var x=0,y=0;if(w.getBoundingClientRect){var z=w.getBoundingClientRect(),A=-(window.scrollX?window.scrollX:window.pageXOffset),B=-(window.scrollY?window.scrollY:window.pageYOffset);return[z.left-A,z.top-B]}if(w.offsetParent)do x+=w.offsetLeft,y+=w.offsetTop;while(w=w.offsetParent);return[x,y]},s=function(){'use strict';var x=document,y=function(z){if(!('object'==typeof window.google&&window.google.maps))return'object'==typeof window.console&&window.console.error&&console.error('Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js.'),function(){};if(!this)return new y(z);z.zoom=z.zoom||15,z.mapType=z.mapType||'roadmap';var C,A=function(ba,ca){return void 0===ba?ca:ba},B=this,D=['bounds_changed','center_changed','click','dblclick','drag','dragend','dragstart','idle','maptypeid_changed','projection_changed','resize','tilesloaded','zoom_changed'],E=['mousemove','mouseout','mouseover'],F=['el','lat','lng','mapType','width','height','markerClusterer','enableNewStyle'],G=z.el||z.div,H=z.markerClusterer,I=google.maps.MapTypeId[z.mapType.toUpperCase()],J=new google.maps.LatLng(z.lat,z.lng),K=A(z.zoomControl,!0),L=z.zoomControlOpt||{style:'DEFAULT',position:'TOP_LEFT'},M=L.style||'DEFAULT',N=L.position||'TOP_LEFT',O=A(z.panControl,!0),P=A(z.mapTypeControl,!0),Q=A(z.scaleControl,!0),R=A(z.streetViewControl,!0),S=A(S,!0),T={},U={zoom:this.zoom,center:J,mapTypeId:I},V={panControl:O,zoomControl:K,zoomControlOptions:{style:google.maps.ZoomControlStyle[M],position:google.maps.ControlPosition[N]},mapTypeControl:P,scaleControl:Q,streetViewControl:R,overviewMapControl:S};if(this.el='string'==typeof z.el||'string'==typeof z.div?-1<G.indexOf('#')?o(G,z.context):l.apply(this,[G,z.context]):G,'undefined'==typeof this.el||null===this.el)throw'No element defined.';for(window.context_menu=window.context_menu||{},window.context_menu[B.el.id]={},this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=z.zoom,this.registered_events={},this.el.style.width=z.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=z.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=z.enableNewStyle,C=0;C<F.length;C++)delete z[F[C]];for(!0!=z.disableDefaultUI&&(U=a(U,V)),T=a(U,z),C=0;C<D.length;C++)delete T[D[C]];for(C=0;C<E.length;C++)delete T[E[C]];this.map=new google.maps.Map(this.el,T),H&&(this.markerClusterer=H.apply(this,[this.map]));var W=function(ba,ca){var da='',ea=window.context_menu[B.el.id][ba];for(var fa in ea)if(ea.hasOwnProperty(fa)){var ga=ea[fa];da+='<li><a id="'+ba+'_'+fa+'" href="#">'+ga.title+'</a></li>'}if(o('gmaps_context_menu')){var ha=o('gmaps_context_menu');ha.innerHTML=da;var fa,ia=ha.getElementsByTagName('a'),ja=ia.length;for(fa=0;fa<ja;fa++){var ka=ia[fa],la=function(pa){pa.preventDefault(),ea[this.id.replace(ba+'_','')].action.apply(B,[ca]),B.hideContextMenu()};google.maps.event.clearListeners(ka,'click'),google.maps.event.addDomListenerOnce(ka,'click',la,!1)}var ma=q.apply(this,[B.el]),na=ma[0]+ca.pixel.x-15,oa=ma[1]+ca.pixel.y-15;ha.style.left=na+'px',ha.style.top=oa+'px'}};this.buildContextMenu=function(ba,ca){if('marker'===ba){ca.pixel={};var da=new google.maps.OverlayView;da.setMap(B.map),da.draw=function(){var fa=da.getProjection(),ga=ca.marker.getPosition();ca.pixel=fa.fromLatLngToContainerPixel(ga),W(ba,ca)}}else W(ba,ca);var ea=o('gmaps_context_menu');setTimeout(function(){ea.style.display='block'},0)},this.setContextMenu=function(ba){window.context_menu[B.el.id][ba.control]={};var ca,da=x.createElement('ul');for(ca in ba.options)if(ba.options.hasOwnProperty(ca)){var ea=ba.options[ca];window.context_menu[B.el.id][ba.control][ea.name]={title:ea.title,action:ea.action}}da.id='gmaps_context_menu',da.style.display='none',da.style.position='absolute',da.style.minWidth='100px',da.style.background='white',da.style.listStyle='none',da.style.padding='8px',da.style.boxShadow='2px 2px 6px #ccc',o('gmaps_context_menu')||x.body.appendChild(da);var fa=o('gmaps_context_menu');google.maps.event.addDomListener(fa,'mouseout',function(ga){ga.relatedTarget&&this.contains(ga.relatedTarget)||window.setTimeout(function(){fa.style.display='none'},400)},!1)},this.hideContextMenu=function(){var ba=o('gmaps_context_menu');ba&&(ba.style.display='none')};var X=function(ba,ca){google.maps.event.addListener(ba,ca,function(da){void 0==da&&(da=this),z[ca].apply(this,[da]),B.hideContextMenu()})};google.maps.event.addListener(this.map,'zoom_changed',this.hideContextMenu);for(var Z,Y=0;Y<D.length;Y++)Z=D[Y],Z in z&&X(this.map,Z);for(var Z,Y=0;Y<E.length;Y++)Z=E[Y],Z in z&&X(this.map,Z);google.maps.event.addListener(this.map,'rightclick',function(ba){z.rightclick&&z.rightclick.apply(this,[ba]),void 0!=window.context_menu[B.el.id].map&&B.buildContextMenu('map',ba)}),this.refresh=function(){google.maps.event.trigger(this.map,'resize')},this.fitZoom=function(){var da,ba=[],ca=this.markers.length;for(da=0;da<ca;da++)'boolean'==typeof this.markers[da].visible&&this.markers[da].visible&&ba.push(this.markers[da].getPosition());this.fitLatLngBounds(ba)},this.fitLatLngBounds=function(ba){var ea,ca=ba.length,da=new google.maps.LatLngBounds;for(ea=0;ea<ca;ea++)da.extend(ba[ea]);this.map.fitBounds(da)},this.setCenter=function(ba,ca,da){this.map.panTo(new google.maps.LatLng(ba,ca)),da&&da()},this.getElement=function(){return this.el},this.zoomIn=function(ba){ba=ba||1,this.zoom=this.map.getZoom()+ba,this.map.setZoom(this.zoom)},this.zoomOut=function(ba){ba=ba||1,this.zoom=this.map.getZoom()-ba,this.map.setZoom(this.zoom)};var aa,_=[];for(aa in this.map)'function'!=typeof this.map[aa]||this[aa]||_.push(aa);for(C=0;C<_.length;C++)(function(ba,ca,da){ba[da]=function(){return ca[da].apply(ca,arguments)}})(this,this.map,_[C])};return y}(this);s.prototype.createControl=function(w){var x=document.createElement('div');for(var y in x.style.cursor='pointer',!0!==w.disableDefaultStyles&&(x.style.fontFamily='Roboto, Arial, sans-serif',x.style.fontSize='11px',x.style.boxShadow='rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px'),w.style)x.style[y]=w.style[y];for(var z in w.id&&(x.id=w.id),w.title&&(x.title=w.title),w.classes&&(x.className=w.classes),w.content&&('string'==typeof w.content?x.innerHTML=w.content:w.content instanceof HTMLElement&&x.appendChild(w.content)),w.position&&(x.position=google.maps.ControlPosition[w.position.toUpperCase()]),w.events)(function(A,B){google.maps.event.addDomListener(A,B,function(){w.events[B].apply(this,[this])})})(x,z);return x.index=1,x},s.prototype.addControl=function(w){var x=this.createControl(w);return this.controls.push(x),this.map.controls[x.position].push(x),x},s.prototype.removeControl=function(w){var y,x=null;for(y=0;y<this.controls.length;y++)this.controls[y]==w&&(x=this.controls[y].position,this.controls.splice(y,1));if(x)for(y=0;y<this.map.controls.length;y++){var z=this.map.controls[w.position];if(z.getAt(y)==w){z.removeAt(y);break}}return w},s.prototype.createMarker=function(w){if(void 0==w.lat&&void 0==w.lng&&void 0==w.position)throw'No latitude or longitude defined.';var x=this,y=w.details,z=w.fences,A=w.outside,B={position:new google.maps.LatLng(w.lat,w.lng),map:null},C=a(B,w);delete C.lat,delete C.lng,delete C.fences,delete C.outside;var D=new google.maps.Marker(C);if(D.fences=z,w.infoWindow){D.infoWindow=new google.maps.InfoWindow(w.infoWindow);for(var E=['closeclick','content_changed','domready','position_changed','zindex_changed'],F=0;F<E.length;F++)(function(I,J){w.infoWindow[J]&&google.maps.event.addListener(I,J,function(K){w.infoWindow[J].apply(this,[K])})})(D.infoWindow,E[F])}for(var G=['animation_changed','clickable_changed','cursor_changed','draggable_changed','flat_changed','icon_changed','position_changed','shadow_changed','shape_changed','title_changed','visible_changed','zindex_changed'],H=['dblclick','drag','dragend','dragstart','mousedown','mouseout','mouseover','mouseup'],F=0;F<G.length;F++)(function(I,J){w[J]&&google.maps.event.addListener(I,J,function(){w[J].apply(this,[this])})})(D,G[F]);for(var F=0;F<H.length;F++)(function(I,J,K){w[K]&&google.maps.event.addListener(J,K,function(L){L.pixel||(L.pixel=I.getProjection().fromLatLngToPoint(L.latLng)),w[K].apply(this,[L])})})(this.map,D,H[F]);return google.maps.event.addListener(D,'click',function(){this.details=y,w.click&&w.click.apply(this,[this]),D.infoWindow&&(x.hideInfoWindows(),D.infoWindow.open(x.map,D))}),google.maps.event.addListener(D,'rightclick',function(I){I.marker=this,w.rightclick&&w.rightclick.apply(this,[I]),void 0!=window.context_menu[x.el.id].marker&&x.buildContextMenu('marker',I)}),D.fences&&google.maps.event.addListener(D,'dragend',function(){x.checkMarkerGeofence(D,function(I,J){A(I,J)})}),D},s.prototype.addMarker=function(w){var x;if(w.hasOwnProperty('gm_accessors_'))x=w;else if(w.hasOwnProperty('lat')&&w.hasOwnProperty('lng')||w.position)x=this.createMarker(w);else throw'No latitude or longitude defined.';return x.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(x),this.markers.push(x),s.fire('marker_added',x,this),x},s.prototype.addMarkers=function(w){for(var y,x=0;y=w[x];x++)this.addMarker(y);return this.markers},s.prototype.hideInfoWindows=function(){for(var x,w=0;x=this.markers[w];w++)x.infoWindow&&x.infoWindow.close()},s.prototype.removeMarker=function(w){for(var x=0;x<this.markers.length;x++)if(this.markers[x]===w){this.markers[x].setMap(null),this.markers.splice(x,1),this.markerClusterer&&this.markerClusterer.removeMarker(w),s.fire('marker_removed',w,this);break}return w},s.prototype.removeMarkers=function(w){var x=[];if('undefined'==typeof w){for(var z,y=0;y<this.markers.length;y++)z=this.markers[y],z.setMap(null),s.fire('marker_removed',z,this);this.markerClusterer&&this.markerClusterer.clearMarkers&&this.markerClusterer.clearMarkers(),this.markers=x}else{for(var A,y=0;y<w.length;y++)if(A=this.markers.indexOf(w[y]),-1<A){var z=this.markers[A];z.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(z),s.fire('marker_removed',z,this)}for(var z,y=0;y<this.markers.length;y++)z=this.markers[y],null!=z.getMap()&&x.push(z);this.markers=x}},s.prototype.drawOverlay=function(w){var x=new google.maps.OverlayView,y=!0;return x.setMap(this.map),null!=w.auto_show&&(y=w.auto_show),x.onAdd=function(){var z=document.createElement('div');z.style.borderStyle='none',z.style.borderWidth='0px',z.style.position='absolute',z.style.zIndex=100,z.innerHTML=w.content,x.el=z,w.layer||(w.layer='overlayLayer');var A=this.getPanes(),B=A[w.layer],C=['contextmenu','DOMMouseScroll','dblclick','mousedown'];B.appendChild(z);for(var D=0;D<C.length;D++)(function(E,F){google.maps.event.addDomListener(E,F,function(G){-1!=navigator.userAgent.toLowerCase().indexOf('msie')&&document.all?(G.cancelBubble=!0,G.returnValue=!1):G.stopPropagation()})})(z,C[D]);w.click&&(A.overlayMouseTarget.appendChild(x.el),google.maps.event.addDomListener(x.el,'click',function(){w.click.apply(x,[x])})),google.maps.event.trigger(this,'ready')},x.draw=function(){var z=this.getProjection(),A=z.fromLatLngToDivPixel(new google.maps.LatLng(w.lat,w.lng));w.horizontalOffset=w.horizontalOffset||0,w.verticalOffset=w.verticalOffset||0;var B=x.el,C=B.children[0],D=C.clientHeight,E=C.clientWidth;switch(w.verticalAlign){case'top':B.style.top=A.y-D+w.verticalOffset+'px';break;default:case'middle':B.style.top=A.y-D/2+w.verticalOffset+'px';break;case'bottom':B.style.top=A.y+w.verticalOffset+'px';}switch(w.horizontalAlign){case'left':B.style.left=A.x-E+w.horizontalOffset+'px';break;default:case'center':B.style.left=A.x-E/2+w.horizontalOffset+'px';break;case'right':B.style.left=A.x+w.horizontalOffset+'px';}B.style.display=y?'block':'none',y||w.show.apply(this,[B])},x.onRemove=function(){var z=x.el;w.remove?w.remove.apply(this,[z]):(x.el.parentNode.removeChild(x.el),x.el=null)},this.overlays.push(x),x},s.prototype.removeOverlay=function(w){for(var x=0;x<this.overlays.length;x++)if(this.overlays[x]===w){this.overlays[x].setMap(null),this.overlays.splice(x,1);break}},s.prototype.removeOverlays=function(){for(var x,w=0;x=this.overlays[w];w++)x.setMap(null);this.overlays=[]},s.prototype.drawPolyline=function(w){var x=[],y=w.path;if(y.length)if(void 0===y[0][0])x=y;else for(var A,z=0;A=y[z];z++)x.push(new google.maps.LatLng(A[0],A[1]));var B={map:this.map,path:x,strokeColor:w.strokeColor,strokeOpacity:w.strokeOpacity,strokeWeight:w.strokeWeight,geodesic:w.geodesic,clickable:!0,editable:!1,visible:!0};w.hasOwnProperty('clickable')&&(B.clickable=w.clickable),w.hasOwnProperty('editable')&&(B.editable=w.editable),w.hasOwnProperty('icons')&&(B.icons=w.icons),w.hasOwnProperty('zIndex')&&(B.zIndex=w.zIndex);for(var C=new google.maps.Polyline(B),D=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'],E=0;E<D.length;E++)(function(F,G){w[G]&&google.maps.event.addListener(F,G,function(H){w[G].apply(this,[H])})})(C,D[E]);return this.polylines.push(C),s.fire('polyline_added',C,this),C},s.prototype.removePolyline=function(w){for(var x=0;x<this.polylines.length;x++)if(this.polylines[x]===w){this.polylines[x].setMap(null),this.polylines.splice(x,1),s.fire('polyline_removed',w,this);break}},s.prototype.removePolylines=function(){for(var x,w=0;x=this.polylines[w];w++)x.setMap(null);this.polylines=[]},s.prototype.drawCircle=function(w){w=a({map:this.map,center:new google.maps.LatLng(w.lat,w.lng)},w),delete w.lat,delete w.lng;for(var x=new google.maps.Circle(w),y=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'],z=0;z<y.length;z++)(function(A,B){w[B]&&google.maps.event.addListener(A,B,function(C){w[B].apply(this,[C])})})(x,y[z]);return this.polygons.push(x),x},s.prototype.drawRectangle=function(w){w=a({map:this.map},w);var x=new google.maps.LatLngBounds(new google.maps.LatLng(w.bounds[0][0],w.bounds[0][1]),new google.maps.LatLng(w.bounds[1][0],w.bounds[1][1]));w.bounds=x;for(var y=new google.maps.Rectangle(w),z=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'],A=0;A<z.length;A++)(function(B,C){w[C]&&google.maps.event.addListener(B,C,function(D){w[C].apply(this,[D])})})(y,z[A]);return this.polygons.push(y),y},s.prototype.drawPolygon=function(w){var x=!1;w.hasOwnProperty('useGeoJSON')&&(x=w.useGeoJSON),delete w.useGeoJSON,w=a({map:this.map},w),!1==x&&(w.paths=[w.paths.slice(0)]),0<w.paths.length&&0<w.paths[0].length&&(w.paths=d(c(w.paths,h,x)));for(var y=new google.maps.Polygon(w),z=['click','dblclick','mousedown','mousemove','mouseout','mouseover','mouseup','rightclick'],A=0;A<z.length;A++)(function(B,C){w[C]&&google.maps.event.addListener(B,C,function(D){w[C].apply(this,[D])})})(y,z[A]);return this.polygons.push(y),s.fire('polygon_added',y,this),y},s.prototype.removePolygon=function(w){for(var x=0;x<this.polygons.length;x++)if(this.polygons[x]===w){this.polygons[x].setMap(null),this.polygons.splice(x,1),s.fire('polygon_removed',w,this);break}},s.prototype.removePolygons=function(){for(var x,w=0;x=this.polygons[w];w++)x.setMap(null);this.polygons=[]},s.prototype.getFromFusionTables=function(w){var x=w.events;delete w.events;var z=new google.maps.FusionTablesLayer(w);for(var A in x)(function(B,C){google.maps.event.addListener(B,C,function(D){x[C].apply(this,[D])})})(z,A);return this.layers.push(z),z},s.prototype.loadFromFusionTables=function(w){var x=this.getFromFusionTables(w);return x.setMap(this.map),x},s.prototype.getFromKML=function(w){var x=w.url,y=w.events;delete w.url,delete w.events;var A=new google.maps.KmlLayer(x,w);for(var B in y)(function(C,D){google.maps.event.addListener(C,D,function(E){y[D].apply(this,[E])})})(A,B);return this.layers.push(A),A},s.prototype.loadFromKML=function(w){var x=this.getFromKML(w);return x.setMap(this.map),x},s.prototype.addLayer=function(w,x){x=x||{};var y;switch(w){case'weather':this.singleLayers.weather=y=new google.maps.weather.WeatherLayer;break;case'clouds':this.singleLayers.clouds=y=new google.maps.weather.CloudLayer;break;case'traffic':this.singleLayers.traffic=y=new google.maps.TrafficLayer;break;case'transit':this.singleLayers.transit=y=new google.maps.TransitLayer;break;case'bicycling':this.singleLayers.bicycling=y=new google.maps.BicyclingLayer;break;case'panoramio':this.singleLayers.panoramio=y=new google.maps.panoramio.PanoramioLayer,y.setTag(x.filter),delete x.filter,x.click&&google.maps.event.addListener(y,'click',function(B){x.click(B),delete x.click});break;case'places':if(this.singleLayers.places=y=new google.maps.places.PlacesService(this.map),x.search||x.nearbySearch||x.radarSearch){var z={bounds:x.bounds||null,keyword:x.keyword||null,location:x.location||null,name:x.name||null,radius:x.radius||null,rankBy:x.rankBy||null,types:x.types||null};x.radarSearch&&y.radarSearch(z,x.radarSearch),x.search&&y.search(z,x.search),x.nearbySearch&&y.nearbySearch(z,x.nearbySearch)}if(x.textSearch){var A={bounds:x.bounds||null,location:x.location||null,query:x.query||null,radius:x.radius||null};y.textSearch(A,x.textSearch)}}if(void 0!==y)return'function'==typeof y.setOptions&&y.setOptions(x),'function'==typeof y.setMap&&y.setMap(this.map),y},s.prototype.removeLayer=function(w){if('string'==typeof w&&void 0!==this.singleLayers[w])this.singleLayers[w].setMap(null),delete this.singleLayers[w];else for(var x=0;x<this.layers.length;x++)if(this.layers[x]===w){this.layers[x].setMap(null),this.layers.splice(x,1);break}};var u,v;return s.prototype.getRoutes=function(w){switch(w.travelMode){case'bicycling':u=google.maps.TravelMode.BICYCLING;break;case'transit':u=google.maps.TravelMode.TRANSIT;break;case'driving':u=google.maps.TravelMode.DRIVING;break;default:u=google.maps.TravelMode.WALKING;}v='imperial'===w.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var y=a({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},w);y.origin=/string/.test(typeof w.origin)?w.origin:new google.maps.LatLng(w.origin[0],w.origin[1]),y.destination=/string/.test(typeof w.destination)?w.destination:new google.maps.LatLng(w.destination[0],w.destination[1]),y.travelMode=u,y.unitSystem=v,delete y.callback,delete y.error;var z=this,A=[],B=new google.maps.DirectionsService;B.route(y,function(C,D){if(D===google.maps.DirectionsStatus.OK){for(var E in C.routes)C.routes.hasOwnProperty(E)&&A.push(C.routes[E]);w.callback&&w.callback(A,C,D)}else w.error&&w.error(C,D)})},s.prototype.removeRoutes=function(){this.routes.length=0},s.prototype.getElevations=function(w){w=a({locations:[],path:!1,samples:256},w),0<w.locations.length&&0<w.locations[0].length&&(w.locations=d(c([w.locations],h,!1)));var x=w.callback;delete w.callback;var y=new google.maps.ElevationService;if(!w.path)delete w.path,delete w.samples,y.getElevationForLocations(w,function(A,B){x&&'function'==typeof x&&x(A,B)});else{var z={path:w.locations,samples:w.samples};y.getElevationAlongPath(z,function(A,B){x&&'function'==typeof x&&x(A,B)})}},s.prototype.cleanRoute=s.prototype.removePolylines,s.prototype.renderRoute=function(w,x){var A,y=this,z='string'==typeof x.panel?document.getElementById(x.panel.replace('#','')):x.panel;x.panel=z,x=a({map:this.map},x),A=new google.maps.DirectionsRenderer(x),this.getRoutes({origin:w.origin,destination:w.destination,travelMode:w.travelMode,waypoints:w.waypoints,unitSystem:w.unitSystem,error:w.error,avoidHighways:w.avoidHighways,avoidTolls:w.avoidTolls,optimizeWaypoints:w.optimizeWaypoints,callback:function(B,C,D){D===google.maps.DirectionsStatus.OK&&A.setDirections(C)}})},s.prototype.drawRoute=function(w){var x=this;this.getRoutes({origin:w.origin,destination:w.destination,travelMode:w.travelMode,waypoints:w.waypoints,unitSystem:w.unitSystem,error:w.error,avoidHighways:w.avoidHighways,avoidTolls:w.avoidTolls,optimizeWaypoints:w.optimizeWaypoints,callback:function(y){if(0<y.length){var z={path:y[y.length-1].overview_path,strokeColor:w.strokeColor,strokeOpacity:w.strokeOpacity,strokeWeight:w.strokeWeight};w.hasOwnProperty('icons')&&(z.icons=w.icons),x.drawPolyline(z),w.callback&&w.callback(y[y.length-1])}}})},s.prototype.travelRoute=function(w){if(w.origin&&w.destination)this.getRoutes({origin:w.origin,destination:w.destination,travelMode:w.travelMode,waypoints:w.waypoints,unitSystem:w.unitSystem,error:w.error,callback:function(A){if(0<A.length&&w.start&&w.start(A[A.length-1]),0<A.length&&w.step){var B=A[A.length-1];if(0<B.legs.length)for(var E,C=B.legs[0].steps,D=0;E=C[D];D++)E.step_number=D,w.step(E,B.legs[0].steps.length-1)}0<A.length&&w.end&&w.end(A[A.length-1])}});else if(w.route&&0<w.route.legs.length)for(var z,x=w.route.legs[0].steps,y=0;z=x[y];y++)z.step_number=y,w.step(z)},s.prototype.drawSteppedRoute=function(w){var x=this;if(w.origin&&w.destination)this.getRoutes({origin:w.origin,destination:w.destination,travelMode:w.travelMode,waypoints:w.waypoints,error:w.error,callback:function(C){if(0<C.length&&w.start&&w.start(C[C.length-1]),0<C.length&&w.step){var D=C[C.length-1];if(0<D.legs.length)for(var G,E=D.legs[0].steps,F=0;G=E[F];F++){G.step_number=F;var H={path:G.path,strokeColor:w.strokeColor,strokeOpacity:w.strokeOpacity,strokeWeight:w.strokeWeight};w.hasOwnProperty('icons')&&(H.icons=w.icons),x.drawPolyline(H),w.step(G,D.legs[0].steps.length-1)}}0<C.length&&w.end&&w.end(C[C.length-1])}});else if(w.route&&0<w.route.legs.length)for(var A,y=w.route.legs[0].steps,z=0;A=y[z];z++){A.step_number=z;var B={path:A.path,strokeColor:w.strokeColor,strokeOpacity:w.strokeOpacity,strokeWeight:w.strokeWeight};w.hasOwnProperty('icons')&&(B.icons=w.icons),x.drawPolyline(B),w.step(A)}},s.Route=function(w){this.origin=w.origin,this.destination=w.destination,this.waypoints=w.waypoints,this.map=w.map,this.route=w.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length;var x={path:new google.maps.MVCArray,strokeColor:w.strokeColor,strokeOpacity:w.strokeOpacity,strokeWeight:w.strokeWeight};w.hasOwnProperty('icons')&&(x.icons=w.icons),this.polyline=this.map.drawPolyline(x).getPath()},s.Route.prototype.getRoute=function(w){var x=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:w.travelMode,waypoints:this.waypoints||[],error:w.error,callback:function(){x.route=e[0],w.callback&&w.callback.call(x)}})},s.Route.prototype.back=function(){if(0<this.step_count){this.step_count--;var w=this.route.legs[0].steps[this.step_count].path;for(var x in w)w.hasOwnProperty(x)&&this.polyline.pop()}},s.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var w=this.route.legs[0].steps[this.step_count].path;for(var x in w)w.hasOwnProperty(x)&&this.polyline.push(w[x]);this.step_count++}},s.prototype.checkGeofence=function(w,x,y){return y.containsLatLng(new google.maps.LatLng(w,x))},s.prototype.checkMarkerGeofence=function(w,x){if(w.fences)for(var z,A,y=0;z=w.fences[y];y++)A=w.getPosition(),this.checkGeofence(A.lat(),A.lng(),z)||x(w,z)},s.prototype.toImage=function(w){var w=w||{},x={};if(x.size=w.size||[this.el.clientWidth,this.el.clientHeight],x.lat=this.getCenter().lat(),x.lng=this.getCenter().lng(),0<this.markers.length){x.markers=[];for(var y=0;y<this.markers.length;y++)x.markers.push({lat:this.markers[y].getPosition().lat(),lng:this.markers[y].getPosition().lng()})}if(0<this.polylines.length){var z=this.polylines[0];x.polyline={},x.polyline.path=google.maps.geometry.encoding.encodePath(z.getPath()),x.polyline.strokeColor=z.strokeColor,x.polyline.strokeOpacity=z.strokeOpacity,x.polyline.strokeWeight=z.strokeWeight}return s.staticMapURL(x)},s.staticMapURL=function(w){function x(V,W){if('#'===V[0]&&(V=V.replace('#','0x'),W)){if(W=parseFloat(W),W=Math.min(1,Math.max(W,0)),0===W)return'0x00000000';W=(255*W).toString(16),1===W.length&&(W+=W),V=V.slice(0,8)+W}return V}var z,y=[],A=('file:'===location.protocol?'http:':location.protocol)+'//maps.googleapis.com/maps/api/staticmap';w.url&&(A=w.url,delete w.url),A+='?';var B=w.markers;delete w.markers,!B&&w.marker&&(B=[w.marker],delete w.marker);var C=w.styles;delete w.styles;var D=w.polyline;if(delete w.polyline,w.center)y.push('center='+w.center),delete w.center;else if(w.address)y.push('center='+w.address),delete w.address;else if(w.lat)y.push(['center=',w.lat,',',w.lng].join('')),delete w.lat,delete w.lng;else if(w.visible){var E=encodeURI(w.visible.join('|'));y.push('visible='+E)}var F=w.size;F?(F.join&&(F=F.join('x')),delete w.size):F='630x300',y.push('size='+F),w.zoom||!1===w.zoom||(w.zoom=15);var G=!w.hasOwnProperty('sensor')||!!w.sensor;for(var H in delete w.sensor,y.push('sensor='+G),w)w.hasOwnProperty(H)&&y.push(H+'='+w[H]);if(B)for(var I,J,K=0;z=B[K];K++){for(var H in I=[],z.size&&'normal'!==z.size?(I.push('size:'+z.size),delete z.size):z.icon&&(I.push('icon:'+encodeURI(z.icon)),delete z.icon),z.color&&(I.push('color:'+z.color.replace('#','0x')),delete z.color),z.label&&(I.push('label:'+z.label[0].toUpperCase()),delete z.label),J=z.address?z.address:z.lat+','+z.lng,delete z.address,delete z.lat,delete z.lng,z)z.hasOwnProperty(H)&&I.push(H+':'+z[H]);I.length||0===K?(I.push(J),I=I.join('|'),y.push('markers='+encodeURI(I))):(I=y.pop()+encodeURI('|'+J),y.push(I))}if(C)for(var L,K=0;K<C.length;K++){L=[],C[K].featureType&&L.push('feature:'+C[K].featureType.toLowerCase()),C[K].elementType&&L.push('element:'+C[K].elementType.toLowerCase());for(var M=0;M<C[K].stylers.length;M++)for(var N in C[K].stylers[M]){var O=C[K].stylers[M][N];('hue'==N||'color'==N)&&(O='0x'+O.substring(1)),L.push(N+':'+O)}var P=L.join('|');''!=P&&y.push('style='+P)}if(D){if(z=D,D=[],z.strokeWeight&&D.push('weight:'+parseInt(z.strokeWeight,10)),z.strokeColor){var Q=x(z.strokeColor,z.strokeOpacity);D.push('color:'+Q)}if(z.fillColor){var R=x(z.fillColor,z.fillOpacity);D.push('fillcolor:'+R)}var S=z.path;if(S.join)for(var T,M=0;T=S[M];M++)D.push(T.join(','));else D.push('enc:'+S);D=D.join('|'),y.push('path='+encodeURI(D))}var U=window.devicePixelRatio||1;return y.push('scale='+U),y=y.join('&'),A+y},s.prototype.addMapType=function(w,x){if(x.hasOwnProperty('getTileUrl')&&'function'==typeof x.getTileUrl){x.tileSize=x.tileSize||new google.maps.Size(256,256);var y=new google.maps.ImageMapType(x);this.map.mapTypes.set(w,y)}else throw'\'getTileUrl\' function required.'},s.prototype.addOverlayMapType=function(w){if(w.hasOwnProperty('getTile')&&'function'==typeof w.getTile){var x=w.index;delete w.index,this.map.overlayMapTypes.insertAt(x,w)}else throw'\'getTile\' function required.'},s.prototype.removeOverlayMapType=function(w){this.map.overlayMapTypes.removeAt(w)},s.prototype.addStyle=function(w){var x=new google.maps.StyledMapType(w.styles,{name:w.styledMapName});this.map.mapTypes.set(w.mapTypeId,x)},s.prototype.setStyle=function(w){this.map.setMapTypeId(w)},s.prototype.createPanorama=function(w){return w.hasOwnProperty('lat')&&w.hasOwnProperty('lng')||(w.lat=this.getCenter().lat(),w.lng=this.getCenter().lng()),this.panorama=s.createPanorama(w),this.map.setStreetView(this.panorama),this.panorama},s.createPanorama=function(w){var x=o(w.el,w.context);w.position=new google.maps.LatLng(w.lat,w.lng),delete w.el,delete w.context,delete w.lat,delete w.lng;for(var y=['closeclick','links_changed','pano_changed','position_changed','pov_changed','resize','visible_changed'],z=a({visible:!0},w),A=0;A<y.length;A++)delete z[y[A]];for(var B=new google.maps.StreetViewPanorama(x,z),A=0;A<y.length;A++)(function(C,D){w[D]&&google.maps.event.addListener(C,D,function(){w[D].apply(this)})})(B,y[A]);return B},s.prototype.on=function(w,x){return s.on(w,this,x)},s.prototype.off=function(w){s.off(w,this)},s.prototype.once=function(w,x){return s.once(w,this,x)},s.custom_events=['marker_added','marker_removed','polyline_added','polyline_removed','polygon_added','polygon_removed','geolocated','geolocation_failed'],s.on=function(w,x,y){if(-1==s.custom_events.indexOf(w))return x instanceof s&&(x=x.map),google.maps.event.addListener(x,w,y);var z={handler:y,eventName:w};return x.registered_events[w]=x.registered_events[w]||[],x.registered_events[w].push(z),z},s.off=function(w,x){-1==s.custom_events.indexOf(w)?(x instanceof s&&(x=x.map),google.maps.event.clearListeners(x,w)):x.registered_events[w]=[]},s.once=function(w,x,y){if(-1==s.custom_events.indexOf(w))return x instanceof s&&(x=x.map),google.maps.event.addListenerOnce(x,w,y)},s.fire=function(w,x,y){if(-1==s.custom_events.indexOf(w))google.maps.event.trigger(x,w,Array.prototype.slice.apply(arguments).slice(2));else if(w in y.registered_events)for(var z=y.registered_events[w],A=0;A<z.length;A++)(function(B,C,D){B.apply(C,[D])})(z[A].handler,y,x)},s.geolocate=function(w){var x=w.always||w.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(y){w.success(y),x&&x()},function(y){w.error(y),x&&x()},w.options):(w.not_supported(),x&&x())},s.geocode=function(w){this.geocoder=new google.maps.Geocoder;var x=w.callback;w.hasOwnProperty('lat')&&w.hasOwnProperty('lng')&&(w.latLng=new google.maps.LatLng(w.lat,w.lng)),delete w.lat,delete w.lng,delete w.callback,this.geocoder.geocode(w,function(y,z){x(y,z)})},'object'==typeof window.google&&window.google.maps&&(!google.maps.Polygon.prototype.getBounds&&(google.maps.Polygon.prototype.getBounds=function(){for(var z,x=new google.maps.LatLngBounds,y=this.getPaths(),A=0;A<y.getLength();A++){z=y.getAt(A);for(var B=0;B<z.getLength();B++)x.extend(z.getAt(B))}return x}),!google.maps.Polygon.prototype.containsLatLng&&(google.maps.Polygon.prototype.containsLatLng=function(w){var x=this.getBounds();if(null!==x&&!x.contains(w))return!1;for(var y=!1,z=this.getPaths().getLength(),A=0;A<z;A++)for(var B=this.getPaths().getAt(A),C=B.getLength(),D=C-1,E=0;E<C;E++){var F=B.getAt(E),G=B.getAt(D);(F.lng()<w.lng()&&G.lng()>=w.lng()||G.lng()<w.lng()&&F.lng()>=w.lng())&&F.lat()+(w.lng()-F.lng())/(G.lng()-F.lng())*(G.lat()-F.lat())<w.lat()&&(y=!y),D=E}return y}),!google.maps.Circle.prototype.containsLatLng&&(google.maps.Circle.prototype.containsLatLng=function(w){return!google.maps.geometry||google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),w)<=this.getRadius()}),google.maps.Rectangle.prototype.containsLatLng=function(w){return this.getBounds().contains(w)},google.maps.LatLngBounds.prototype.containsLatLng=function(w){return this.contains(w)},google.maps.Marker.prototype.setFences=function(w){this.fences=w},google.maps.Marker.prototype.addFence=function(w){this.fences.push(w)},google.maps.Marker.prototype.getId=function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(w){'use strict';if(null==this)throw new TypeError;var x=Object(this),y=x.length>>>0;if(0==y)return-1;var z=0;if(1<arguments.length&&(z=+arguments[1],z==z?0!=z&&z!=Infinity&&z!=-Infinity&&(z=(0<z||-1)*Math.floor(Math.abs(z))):z=0),z>=y)return-1;for(var A=0<=z?z:Math.max(y-Math.abs(z),0);A<y;A++)if(A in x&&x[A]===w)return A;return-1}),s});