$(function(){function a(){h(),$.ajax({method:'GET',url:'/app/checkins'}).done(function(o){return 0>=o.length?(l.fadeOut('fast'),k.fadeIn('fast'),n.removeMarkers(),void j()):void(k.fadeOut('fast'),l.fadeIn('fast'),l.find('tbody>tr').remove(),n.removeMarkers(),$.each(o,function(p,q){var s='data-position="left" data-tooltip="'+q.descricao+'"';f(q.cliente,q.latitude,q.longitude);var t='<tr>';t+='<td>'+q.empregado+'</td>',t+='<td>'+q.cliente+'</td>',t+='<td>'+q.data+'</td>',t+=q.descricao?'<td><span class="status-descricao new badge '+'tooltipped'+' '+c(q.status)+'" style="float: left; margin-left: 0;" data-badge-caption="" '+s+'>'+q.status+'</span></td>':'<td><span class="status-descricao new badge '+c(q.status)+'" style="float: left; margin-left: 0;" data-badge-caption="">'+q.status+'</span></td>',t+='<td><a class="map-marker" data-lat="'+q.latitude+'" data-long="'+q.longitude+'" href="" onclick="return false;"><i class="fa fa-thumb-tack" aria-hidden="true"></i> Ver no mapa</a></td>',t+='</tr>',l.find('tbody').append(t),$('.tooltipped').tooltip({delay:10})}),$('.map-marker').on('click',function(){var p=new google.maps.LatLng($(this).attr('data-lat'),$(this).attr('data-long'));return g(),n.fitLatLngBounds([p]),n.zoomOut(6),!1}),j())}).fail(function(o,p){j(),console.log(p)})}function c(o){return'NORMAL'==o?'green':'SUSPEITO'==o?'orange darken-1':'red'}function f(o,p,q){n.addMarker({lat:p,lng:q,title:o,infoWindow:{content:o}})}function g(){var o=$('#map');$('html,body').animate({scrollTop:o.offset().top},'slow')}function h(){m.addClass('animation')}function j(){m.removeClass('animation')}var k=$('.inspecao-not-found'),l=$('.js-tb-checkins'),m=$('.js-btn-force-update'),n;(function(){n=new GMaps({div:'#map',lat:-18.729985,lng:-47.498914,zoom:15})})(),a(),setInterval(()=>{a()},1e4),$('.js-btn-force-update').on('click',function(o){o.preventDefault(),a()})});